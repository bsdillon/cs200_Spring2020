<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <style>
      .yellow {color:yellow; font-weight:bold;}
      .red {color:red; font-weight:bold;}
      .blue {color:blue; font-weight:bold;}
    </style>
    <script src="ttip.js"></script>
    <script src="goldfield.js"></script>
    <script src="cartesian.js"></script>
    <script src="vectors.js"></script>
    <script>
      var goldField;
      var half = 5;
      var xCurr=0;
      var yCurr=0;
      var distance=0;
      var gold=0;
      
      function init()
      {
        blockWin = false;
        document.getElementById("nextLink").style.visibility="hidden"
        goldField = new GoldField(document.getElementById("field"),30, 2*half+1, 2*half+1);

        yAxis = new YAxis()
        goldField.AddGenericLayer(yAxis);
        yAxis.SetLayerOn(true);

        xAxis = new XAxis()
        goldField.AddGenericLayer(xAxis);
        xAxis.SetLayerOn(true);

        grid = new Grid()
        goldField.AddGenericLayer(grid);
        grid.SetLayerOn(true);
        
        var origin = half;
        mainVert = new Vector(origin,origin,half,-half,"#FF0000")
        goldField.AddGenericLayer(mainVert);
        mainVert.SetLayerOn(true);

        vert1 = new Vector(origin,origin,half-2,-half,"#CC0000")
        goldField.AddGenericLayer(vert1);
        vert1.SetLayerOn(true);

        vert1a = new Vector(origin,origin,half-4,-half,"#990000")
        goldField.AddGenericLayer(vert1a);
        vert1a.SetLayerOn(true);

        vert2 = new Vector(origin,origin,half,-half+2,"#CC0033")
        goldField.AddGenericLayer(vert2);
        vert2.SetLayerOn(true);

        vert3 = new Vector(origin,origin,half,-half+4,"#990066")
        goldField.AddGenericLayer(vert3);
        vert3.SetLayerOn(true);

        vert0 = new Vector(origin,origin,half,0,"#000000")
        goldField.AddGenericLayer(vert0);
        vert0.SetLayerOn(true);

        vert4 = new Vector(origin,origin,half,half,"#0000FF")
        goldField.AddGenericLayer(vert4);
        vert4.SetLayerOn(true);

        vert1 = new Vector(origin,origin,half-2,half,"#0000CC")
        goldField.AddGenericLayer(vert1);
        vert1.SetLayerOn(true);

        vert1a = new Vector(origin,origin,half-4,half,"#000099")
        goldField.AddGenericLayer(vert1a);
        vert1a.SetLayerOn(true);

        vert2 = new Vector(origin,origin,half,half-2,"#3300CC")
        goldField.AddGenericLayer(vert2);
        vert2.SetLayerOn(true);

        vert3 = new Vector(origin,origin,half,half-4,"#660099")
        goldField.AddGenericLayer(vert3);
        vert3.SetLayerOn(true);

        hero = goldField.AddHero();
        newY = origin+Math.floor(Math.random()*2*half-half)
        while(newY==0)
        {
          newY = origin+Math.floor(Math.random()*2*half-half)
        }
        hero.SetPosition(origin+Math.floor(Math.random()*half+1),newY);
        heroSlope = (origin-hero.yPos+0.0)/(hero.xPos-origin);
        //document.getElementById("debug").innerHTML = ""+(origin-hero.yPos+0.0)+"/"+(hero.xPos-origin);

        monster = goldField.AddMonster();
        monster.SetPosition(origin,origin);

        goldField.Redraw();
      }

      var wins = 0;
      sensitive=true;

      function checkAll()
      {
        var dy= document.getElementById("rise").value;
        var dx= document.getElementById("run").value;
        if(!sensitive || dy.length==0 || isNaN(dy) || dx.length==0 || isNaN(dx))
        {
          return;//not done yet; no action
        }

        var yVal = Number(dy);
        var xVal = Number(dx);
        var slope = (yVal+0.0)/xVal;
        if(Math.abs(slope-heroSlope)<.01)
        {
          sensitive=false;
          document.getElementById("rise").value="";
          document.getElementById("run").value="";
          document.getElementById("rise").focus();
          sensitive=true;
          if(Math.random()>.5)
          {
            goldField.PlaySound("coin");
          }
          else
          {
            goldField.PlaySound("win");
          }

          wins = wins+1;
          newY = half+Math.floor(Math.random()*2*half-half)
          while(newY==0)
          {
            newY = half+Math.floor(Math.random()*2*half-half)
          }
          hero.SetPosition(half+Math.floor(Math.random()*half+1),newY);

          heroSlope = (half-hero.yPos+0.0)/(hero.xPos-half);
          if(wins==3)
          {
            document.getElementById("nextLink").style.visibility="visible";
          }
        }
        else
        {
          goldField.PlaySound("hero");
        }
      }
    </script>
  </head>
  <body onload="init()">
    <table><tr><td>
      <canvas id="field"></canvas></td>
      <td class="top">
        <p class="content">
          How can we apply this to a program? In a game, the monster has to make decisions on where
          to go in relation to the player. It's not really an <span class="ttip" id="artificial intelligence" onmouseover="showTTip(this.id)" onmouseout="hideTTip()">artificial intelligence</span>
          but it can at least move closer or further from the hero. That decision can be made from the
          slope. 
        </p>
        <p class="content">
          Look at these slope <span class="ttip" id="vector" onmouseover="showTTip(this.id)" onmouseout="hideTTip()">vector</span>s. Red vectors are <em>positive</em> and blue vectors are <em>negative</em>.
          If you have the slope from the moster to the hero, a positive slope means the monster has to move <em>UP</em>. If it is negative, which direction does he need to go?
        </p>
        <p class="content">
          You can also consider how big the slope is. All the red vectors are positive, but the brightest vector has a slope of 1 (e.g. 5/5=1). What about the ones which are above that slope? They are greater than 1 (e.g. 5/3 or 5/1).
          The ones below are smaller than one (e.g. 3/5 and 1/5). The same goes for negative vectors (e.g. -1/5 or -5/3).
        </p>
        <h2>Using Slope</h2>
        <p class="content">
          Let's try this a few times. What is the slope from the monster to the hero? Write it as an (improper) fraction.<br>
          <input type="text" id="rise" maxlength="3" size="3" onkeyup="checkAll()"></input> / <input type="text" id="run" maxlength="3" size="3" onkeyup="checkAll()"></input>
        </p>
        <p id="output">         
        </p>
        <p id="debug"></p>
        <a href="cartesian4p.html" id="nextLink"><img src="nextbutton.png"></a>
      </td></tr>
    </table>
    <div id="tooltip">
    </div>
  </body>
</html>
