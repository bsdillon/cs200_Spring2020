<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <style>
      .red {color:red; font-weight:bold;}
      .green {color:green; font-weight:bold;}
      .transparent {pointer-events:none;}
      .hidden {color:white;}
    </style>
    <script src="ttip.js"></script>
    <script src="goldfield.js"></script>
    <script src="cartesian.js"></script>
    <script src="vectors.js"></script>
    <script>
      var goldField;
      var half = 5;

      function init()
      {
        document.getElementById("nextLink").style.visibility="hidden";
        goldField = new GoldField(document.getElementById("field"),30, 2*half+1, 2*half+1);

        yAxis = new YAxis()
        goldField.AddGenericLayer(yAxis);
        yAxis.SetLayerOn(true);

        xAxis = new XAxis()
        goldField.AddGenericLayer(xAxis);
        xAxis.SetLayerOn(true);

        grid = new Grid()
        goldField.AddGenericLayer(grid);
        grid.SetLayerOn(true);
        goldField.Redraw();

        colorNames = ["yellow","magenta","cyan","white","pink","gray","black","red","orange","blue","green"];
        colors = ["#FFFF00","#FF00FF","#00FFFF","#FFFFFF","#FFAAAA","#AAAAAA","#000000","#FF0000","#FFAA00","#0000FF","#00FF00"];
        origin = half;
        selectedColors = [];

        hero = goldField.AddHero();
        index = Math.floor(Math.random()*colors.length);
        hero.colorName = colorNames[index];
        heroVector = new Vector(hero.xPos,hero.yPos,origin-hero.xPos,origin-hero.yPos,colors[index])
        selectedColors.push(colorNames.splice(index,1));
        colors.splice(index,1);
        goldField.AddGenericLayer(heroVector);
        heroVector.SetLayerOn(true);

        gold = goldField.AddGold();
        index = Math.floor(Math.random()*colors.length);
        gold.colorName = colorNames[index];
        goldVector = new Vector(gold.xPos,gold.yPos,origin-gold.xPos,origin-gold.yPos,colors[index])
        selectedColors.push(colorNames.splice(index,1));
        colors.splice(index,1);
        goldField.AddGenericLayer(goldVector);
        goldVector.SetLayerOn(true);

        monster = goldField.AddMonster();
        index = Math.floor(Math.random()*colors.length);
        monster.colorName = colorNames[index];
        monsterVector = new Vector(monster.xPos,monster.yPos,origin-monster.xPos,origin-monster.yPos,colors[index])
        selectedColors.push(colorNames.splice(index,1));
        colors.splice(index,1);
        goldField.AddGenericLayer(monsterVector);
        monsterVector.SetLayerOn(true);

        goldField.SetMute(true);
        tree = goldField.AddObstacle();
        obstacleName = tree.Description;
        while(obstacleName!=="Plant")//Rock Water
        {
          tree.Destroy();
          tree = goldField.AddObstacle();
          obstacleName = tree.Description;
        }
        index = Math.floor(Math.random()*colors.length);
        tree.colorName = colorNames[index];
        treeVector = new Vector(tree.xPos,tree.yPos,origin-tree.xPos,origin-tree.yPos,colors[index])
        selectedColors.push(colorNames.splice(index,1));
        colors.splice(index,1);
        goldField.AddGenericLayer(treeVector);
        treeVector.SetLayerOn(true);

        water = goldField.AddObstacle();
        obstacleName = water.Description;
        while(obstacleName!=="Water")
        {
          water.Destroy();
          water = goldField.AddObstacle();
          obstacleName = water.Description;
        }
        index = Math.floor(Math.random()*colors.length);
        water.colorName = colorNames[index];
        waterVector = new Vector(water.xPos,water.yPos,origin-water.xPos,origin-water.yPos,colors[index])
        selectedColors.push(colorNames.splice(index,1));
        colors.splice(index,1);
        goldField.AddGenericLayer(waterVector);
        waterVector.SetLayerOn(true);

        rock = goldField.AddObstacle();
        obstacleName = rock.Description;
        while(obstacleName!=="Rock")
        {
          rock.Destroy();
          rock = goldField.AddObstacle();
          obstacleName = rock.Description;
        }
        index = Math.floor(Math.random()*colors.length);
        rock.colorName = colorNames[index];
        rockVector = new Vector(rock.xPos,rock.yPos,origin-rock.xPos,origin-rock.yPos,colors[index])
        selectedColors.push(colorNames.splice(index,1));
        colors.splice(index,1);
        goldField.AddGenericLayer(rockVector);
        rockVector.SetLayerOn(true);
        goldField.SetMute(false);

        targets = ["tree", "gold", "water", "rock", "monster"];
        target = targets[Math.random()*colors.length;
        document.getElementById("targetObject").html=target
        
        addAllColors(selectedColors);
        goldField.Redraw();
        checkAll();
      }

      function addAllColors(list)
      {
        var tags = document.getElementsByName("colors");
        for(let i=0;i<tags.length;i++)
        {
          for(let c=0;c<list.length;c++)
          {
            var opt = document.createElement("option");        
            opt.text = list[c];
            opt.value = list[c];
            tags[i].options.add(opt);
          }
        }
      }

      function checkAll()
      {
        //document.getElementById("validN"+i).src = v1 ?  "greencheck.png" : "redx.png";

        const validIdentifier = /^[a-zA-Z_][a-zA-Z0-9_]*$/;
        var heroName = document.getElementById("heroIdentifier").value;
        document.getElementById("id1").src = validIdentifier.test(heroName) ?  "greencheck.png" : "redx.png";
        var heroName2 = document.getElementById("id1Again").value;
        document.getElementById("heroIdAgain_valid").src = validIdentifier.test(heroName2) ?  "greencheck.png" : "redx.png";
        document.getElementById("heroIdAgain").src = heroName==heroName2 ?  "greencheck.png" : "redx.png";
        var heroColor = document.getElementById("heroColor").value;
        document.getElementById("color1").src = heroColor==heroVector.color ?  "greencheck.png" : "redx.png";

        var treeName = document.getElementById("treeIdentifier").value;
        document.getElementById("id2").src = validIdentifier.test(treeName) ?  "greencheck.png" : "redx.png";
        var treeColor = document.getElementById("treeColor").value;
        document.getElementById("color2").src = heroColor==heroVector.color ?  "greencheck.png" : "redx.png";

        var goldName = document.getElementById("goldIdentifier").value;
        document.getElementById("id3").src = validIdentifier.test(goldName) ?  "greencheck.png" : "redx.png";
        var goldColor = document.getElementById("goldColor").value;
        document.getElementById("color3").src = heroColor==heroVector.color ?  "greencheck.png" : "redx.png";

        var waterName = document.getElementById("waterIdentifier").value;
        document.getElementById("id4").src = validIdentifier.test(waterName) ?  "greencheck.png" : "redx.png";
        var waterColor = document.getElementById("waterColor").value;
        document.getElementById("color4").src = heroColor==heroVector.color ?  "greencheck.png" : "redx.png";

        var rockName = document.getElementById("rockIdentifier").value;
        document.getElementById("id5").src = validIdentifier.test(rockName) ?  "greencheck.png" : "redx.png";
        var rockColor = document.getElementById("rockColor").value;
        document.getElementById("color5").src = heroColor==heroVector.color ?  "greencheck.png" : "redx.png";

        var monsterName = document.getElementById("monsterIdentifier").value;
        document.getElementById("id6").src = validIdentifier.test(monsterName) ?  "greencheck.png" : "redx.png";
        var monsterColor = document.getElementById("monsterColor").value;
        document.getElementById("color6").src = heroColor==heroVector.color ?  "greencheck.png" : "redx.png";

        var targetID1 = document.getElementById("targetIdentifier1").value;
        document.getElementById("id1_8").src = validIdentifier.test(targetID1) ?  "greencheck.png" : "redxtargetID1==targetID2 = document.getElementById("targetIdentifier2").value;
        document.getElementById("id2_8").src = validIdentifier.test(targetID2) ?  "greencheck.png" : "redx.png";
        document.getElementById("idsMatch").src = targetID1==targetID2 ?  "greencheck.png" : "redx.png";
        document.getElementById("idsCorrect").src = (targetID1==targetID2) && (targetID1==target) ?  "greencheck.png" : "redx.png";

        idsCorrect
      }
    </script>
  </head>
  <body onload="init()">
    <table>
      <tr>
        <td class="top">
          <canvas id="field"></canvas>
        </td>
        <td class="top">
          <h1>Fill in the Code</h1>
          <p class="content">
            Let's use this code to do some things on GoldField. Here we have added several
            figures and each shows a colorful <span class="ttip" id="vector" onmouseover="showTTip(this.id)" onmouseout="hideTTip()">vector</span>
            from a character to the <span class="ttip" id="origin" onmouseover="showTTip(this.id)" onmouseout="hideTTip()">origin</span>.
            This time we will practice creating good <span class="ttip" id="identifier" onmouseover="showTTip(this.id)" onmouseout="hideTTip()">identifiers</span>.
            Up to this point, the identifiers xPos, AddHero, SetLocation, etc. were written in GoldField and you have no control
            over them. Now, you are going to create identifiers for your program. What kind will you create? Here are some rules.
          </p>
          <ul>
            <li>beSimple - You don't want to typeAReallyLongNameForASingleFieldAllTheTime.</li>
            <li>beSpecific - Don't give it a useless name like "thing" but something descriptive like "PurpleVector".</li>
            <li>beReadable - You have to read these names, so it can't just be random or overly abbreviated. Ths is nt hw we wrte sntnces.</li>
          </ul>
          <table><tr>
          <td class="code top">
            <br>
            // var <em>identifier</em> = new Vector(figure.xPos, figure.yPos, x-distance, y-distance, color);<br>
            1. var <input type="text" id="heroIdentifier" onKeyUp="checkAll()"></input> = new Vector(hero.xPos, hero.yPos, 0, 0, Colors.<select name="colors" id="heroColor"></select>);<br>
            2. var <input type="text" id="treeIdentifier" onKeyUp="checkAll()"></input> = new Vector(tree.xPos, tree.yPos, 0, 0, Colors.<select name="colors" id="treeColor"></select>);<br>
            3. var <input type="text" id="goldIdentifier" onKeyUp="checkAll()"></input> = new Vector(gold.xPos, gold.yPos, 0, 0, Colors.<select name="colors" id="goldColor"></select>);<br>
            4. var <input type="text" id="waterIdentifier" onKeyUp="checkAll()"></input> = new Vector(water.xPos, water.yPos, 0, 0, Colors.<select name="colors" id="waterColor"></select>);<br>
            5. var <input type="text" id="rockIdentifier" onKeyUp="checkAll()"></input> = new Vector(rock.xPos, rock.yPos, 0, 0, Colors.<select name="colors" id="rockColor"></select>);<br>
            6. var <input type="text" id="monsterIdentifier" onKeyUp="checkAll()"></input> = new Vector(monster.xPos, monster.yPos, 0, 0, Colors.<select name="colors" id="monsterColor"></select>);<br>
            7. // Move the hero to the <span id="targetObject"></span>.
            8. <input type="text" id="id1Again" maxlength="11" size="11" onKeyUp="checkAll()"></input>.SetPosition(<input type="text" id="targetIdentifier1" maxlength="4" size="4" onKeyUp="checkAll()"></input>.xPos, <input type="text" id="targetIdentifier" maxlength="4" size="4" onKeyUp="checkAll()"></input>.yPos);
          </td><td class="top">
          <h3>Check Your Code!</h3>
          <ul>
            <li><img src="" id="id1" width="20">valid identifier on line 1</li>
            <li><img src="" id="color1" width="20">correct color on line 1</li>
            <li><img src="" id="id2" width="20">valid identifier on line 2</li>
            <li><img src="" id="color2" width="20">correct color on line 2</li>
            <li><img src="" id="id3" width="20">valid identifier on line 3</li>
            <li><img src="" id="color3" width="20">correct color on line 3</li>
            <li><img src="" id="id4" width="20">valid identifier on line 4</li>
            <li><img src="" id="color4" width="20">correct color on line 4</li>
            <li><img src="" id="id5" width="20">valid identifier on line 5</li>
            <li><img src="" id="color5" width="20">correct color on line 5</li>
            <li><img src="" id="id6" width="20">valid identifier on line 6</li>
            <li><img src="" id="color6" width="20">correct color on line 6</li>
            <li><img src="" id="heroIdAgain_valid" width="20">valid hero identifier on line 8</li>
            <li><img src="" id="heroIdAgain" width="20">correct hero identifier on line 8</li>
            <li><img src="" id="id1_8" width="20">valid identifier for xPos on line 8</li>
            <li><img src="" id="id2_8" width="20">valid identifier for xPos on line 8</li>
            <li><img src="" id="idsMatch" width="20">identifiers match on line 8</li>
            <li><img src="" id="idsCorrect" width="20">correct identifier for target on line 8</li>
          </ul>
          </td></tr></table>
        </td>
      </tr>
    </table>
    <a href="cartesian4.html" id="nextLink"><img src="nextbutton.png"></a>
    <div id="tooltip">
    </div>
  </body>
</html>
