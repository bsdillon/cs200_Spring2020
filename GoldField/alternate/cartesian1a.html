<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <style>      
      #output {text-align:center;}
      #targetLocation {color:red; font-weight:bold;}
    </style>
    <script src="goldfield.js"></script>
    <script src="cartesian.js"></script>
    <script>
      var goldField;
      var halfX = 10
      var hero = null;
      var targetLocation_value;
      var distance;

      function init()
      {
        goldField2 = new GoldField(document.getElementById("field"),50, 2*halfX+1, 1);
        goldField2.AddSound("explode.wav","explode");
        xAxis2 = new XAxis()
        goldField2.AddGenericLayer(xAxis2);
        xAxis2.SetLayerOn(true);
        goldField2.Redraw();
        gold2 = goldField2.AddGold();
        hero2 = goldField2.AddHero();
        distance = gold2.GetPosition()[0] - hero2.GetPosition()[0];
      }

      function checkDistance()
      {
        var fromUser = parseInt(document.getElementById("distanceValue").value)
        var g0 = gold2.GetPosition()[0];
        var h0 = hero2.GetPosition()[0];
        var nextLoc = fromUser+h0;
        if(distance==fromUser)
        {
          var g = Math.floor(Math.random()*(2*halfX+1));
          while(g==g0 || g==h0)
          {
            g = Math.floor(Math.random()*(2*halfX+1));
          }
          var h = Math.floor(Math.random()*(2*halfX+1));
          while(h==g || h==h0)
          {
            h = Math.floor(Math.random()*(2*halfX+1));
          }
          distance = gold2.GetPosition()[0] - hero2.GetPosition()[0];
          distance = g - h;
          goldField2.PlaySound("coin");
          document.getElementById("message").innerHTML="Great job! Try again";
          goldField2.Reset();

          xAxis2 = new XAxis()
          goldField2.AddGenericLayer(xAxis2);
          xAxis2.SetLayerOn(true);
          goldField2.Redraw();
          gold2 = goldField2.AddGold();
          g0 = gold2.GetPosition()[0];
          if(g0!=g)
          {
            gold2.SetPosition(g,0);
          }
          hero2 = goldField2.AddHero();
          h0 = hero2.GetPosition()[0];
          if(h0!=h)
          {
            hero2.SetPosition(h,0);
          }
          document.getElementById("nextLink").innerHTML = "Next Challenge >>>"
        }
        else 
        {
          document.getElementById("message").innerHTML="Oh no! Try again";
          if(nextLoc<0 || nextLoc>=2*halfX+1)
          {
            goldField2.PlaySound("explode");
          }
          else
          {
            goldField2.LookAt(nextLoc,0)
            var nextSpace = goldField.LookAt(loc[0],loc[1]);
            if(nextSpace[0]==Empty)
            {
              var m = goldField2.AddMonster();
              if(m.GetPosition()[0]!=nexLoc)
              {
                m.SetPosition(nextLoc,0);
              }
              goldField2.PlaySound("monster");
            }
            else
            {
              goldField2.PlaySound("explode");
            }
          }
        }
      }
    </script>
  </head>
  <body onload="init()">
    <table>
      <tr>
        <td>
          <canvas id="field"></canvas>
        </td>
      </tr>
      <tr>
        <td>
          <h1>Steps away from a goal</h1>
          <p class="content">
            In a GoldField program you may need to move a character by a pre-determined amount. How far do you need
            to go? Most of the time, how far depends on what you are trying to reach. The way to figure out the 
            distance to a goal is to subtract one from another. This calculation shows up a lot in the code.
          </p>
          <h3> Distance = Goal &minus; Hero;</h3>
          <p class="content">
            In this image the hero is located on the same line as a gold. How many steps left (negative)
            or right (positive) does the hero need to take to get the gold?
            <br><span id="message">&nbsp;</span>
            <br>
            <input type="text" id="distanceValue"></input><button onclick="checkDistance()">Check</button>
          </p>
        </td>
      </tr>
    </table>
    <a href="cartesian2.html" id="nextLink"></a>
  </body>
</html>
